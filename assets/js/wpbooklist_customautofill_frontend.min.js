jQuery(document).ready(function(e){"use strict";var t,s,i,l,a,c,u,r;-1<window.location.href.indexOf("/hoot-vendor-dashboard/product/simple/edit/")&&e(".control").first().append('<div id="wpbooklist-customautofill-html-insertion-wrapper"><input type="submit" value="Search for Book" id="wpbooklist-customautofill-button-id" class="wcv-button wpbooklist-customautofill-button"/></div>'),-1<window.location.href.indexOf("/hoot-vendor-dashboard/product/simple/edit/")&&e("#wcv_custom_product_isbn").on("keyup change paste drop",function(o){var t=this;setTimeout(function(){var o=e(t).val();-1<o.indexOf("-")&&e(t).val(o.replace(/-/g,"")),10<=o.length?e("#wpbooklist-customautofill-button-id").animate({opacity:"1"},{queue:!1,duration:100,complete:function(){e(this).css({"pointer-events":"all"})}}):e("#wpbooklist-customautofill-button-id").animate({opacity:"0.3"},{queue:!1,duration:100,complete:function(){e(this).css({"pointer-events":"none"})}})},0)}),s=[],u=c=a=l=i=t="",r="rgb(120, 170, 58) 0px 0px 1px 2px",-1<window.location.href.indexOf("/hoot-vendor-dashboard/product/simple/edit/")&&e(document).on("click","#wpbooklist-customautofill-button-id",function(o){e("#post_title").val(""),e("#post_title").css({"box-shadow":"none"}),e("#wcv_custom_product_author").val(""),e("#wcv_custom_product_author").css({"box-shadow":"none"}),e("#wcv_custom_product_publisher").val(""),e("#wcv_custom_product_publisher").css({"box-shadow":"none"}),e("#wcv_custom_product_edition").val(""),e("#wcv_custom_product_edition").css({"box-shadow":"none"}),e("#wcv_custom_product_subject").val(""),e("#wcv_custom_product_subject").css({"box-shadow":"none"}),e("#post_content").val(""),e("#post_content").css({"box-shadow":"none"}),e("#_regular_price").val(""),e("#_regular_price").css({"box-shadow":"none"}),e('label[for="_regular_price"]').text("Regular Price ($)"),e(".wcv-featuredimg").empty(),e("#_featured_image_id").val(""),e(".wpbooklist-customautofill-response").animate({opacity:"0"},{queue:!1,duration:500,complete:function(){e(this).remove()}}),e(".pageloader, .wr-loader-3").css({display:"block"}),t=(t=e("#wcv_custom_product_isbn").val()).replace(/ /g,""),s={action:"wpbooklist_customautofill_get_book_action",isbn:t,security:wpbooklistCustomAutofillPhpVariables.adminnonce1},e.ajax({url:ajaxurl,type:"POST",data:s,timeout:0,success:function(o){o=JSON.parse(o),console.log(o),u=0!==o?(""!==o.title&&null!==o.title&&void 0!==o.title&&(e("#post_title").val(o.title),e("#post_title").css({"box-shadow":r})),""!==o.author&&null!==o.author&&void 0!==o.author&&(e("#wcv_custom_product_author").val(o.author),e("#wcv_custom_product_author").css({"box-shadow":r})),""!==o.publisher&&null!==o.publisher&&void 0!==o.publisher&&(e("#wcv_custom_product_publisher").val(o.publisher),e("#wcv_custom_product_publisher").css({"box-shadow":r})),""!==o.edition&&null!==o.edition&&void 0!==o.edition&&(e("#wcv_custom_product_edition").val(o.title),e("#wcv_custom_product_edition").css({"box-shadow":r})),""!==o.category&&null!==o.category&&void 0!==o.category&&(e("#wcv_custom_product_subject").val(o.title),e("#wcv_custom_product_subject").css({"box-shadow":r})),""!==o.lowestusedprice&&null!==o.lowestusedprice&&void 0!==o.lowestusedprice&&(e("#_regular_price").val(o.lowestusedprice.replace("$","")),e('label[for="_regular_price"]').html(e('label[for="_regular_price"]').text()+' <span class="wpbooklist-customautofill-response" id="wpbooklist-customautofill-suggested-price-response">Suggested Price is '+o.lowestusedprice.replace("$","")+"</span>"),e("#_regular_price").css({"box-shadow":r})),""!==o.description&&null!==o.description&&void 0!==o.description&&(l=(new DOMParser).parseFromString(o.description,"text/html"),i=(i=l.body.textContent||"").replace(/  /g," "),e("#post_content").val(i),e("#post_content").css({"box-shadow":r})),a=o.image_attach_data.file.substring(0,o.image_attach_data.file.lastIndexOf(".")),c=o.image_attach_data.file.substring(o.image_attach_data.file.lastIndexOf(".")+1),e(".wcv-featuredimg").html('<img src="http://hootbookrevival.com/wp-content/uploads/'+a+'-150x150.jpg" alt="" title="'+c+'" style="max-width: 100%;">'),e("#_featured_image_id").val(o.image_attachment_id),'<p class="wpbooklist-customautofill-response" id="wpbooklist-customautofill-response-success"><span id="wpbooklist-customautofill-response-success-span">Success!</span> Review the Book Information below for accuracy.<br/>Fields highlighted in Green have been auto-filled.</p>'):'<p class="wpbooklist-customautofill-response" id="wpbooklist-customautofill-response-fail"><span id="wpbooklist-customautofill-response-fail-span">Uh-Oh!</span> We couldn\'t retrieve information for this title.<br/>Please enter the information for this title manually or try again.</p>',e("#wpbooklist-customautofill-html-insertion-wrapper").append(u),e(".pageloader, .wr-loader-3").css({display:"none"})},error:function(o,t,e){console.log(e),console.log(t),console.log(o)}}),o.preventDefault?o.preventDefault():o.returnValue=!1})});