jQuery(document).ready(function(h){"use strict";var o,t,c,r,s,i,a,n;function e(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var o=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(location.search);return null===o?"":decodeURIComponent(o[1].replace(/\+/g," "))}-1<window.location.href.indexOf("/hoot-vendor-dashboard/product/simple/edit/")&&h(".control").first().append('<div id="wpbooklist-customautofill-html-insertion-wrapper"><input type="submit" value="Search for Book" id="wpbooklist-customautofill-button-id" class="wcv-button wpbooklist-customautofill-button"/></div>'),-1<window.location.href.indexOf("/hoot-vendor-dashboard/product/simple/edit/")&&h("#wcv_custom_product_isbn").on("keyup change paste drop",function(e){var o=this;setTimeout(function(){var e=h(o).val();-1<e.indexOf("-")&&h(o).val(e.replace(/-/g,"")),10<=e.length?h("#wpbooklist-customautofill-button-id").animate({opacity:"1"},{queue:!1,duration:100,complete:function(){h(this).css({"pointer-events":"all"})}}):h("#wpbooklist-customautofill-button-id").animate({opacity:"0.3"},{queue:!1,duration:100,complete:function(){h(this).css({"pointer-events":"none"})}})},0)}),t=[],a=i=s=r=c=o="",n="rgb(120, 170, 58) 0px 0px 1px 2px",-1<window.location.href.indexOf("/hoot-vendor-dashboard/product/simple/edit/")&&h(document).on("click","#wpbooklist-customautofill-button-id",function(e){h("#post_title").val(""),h("#post_title").css({"box-shadow":"none"}),h("#wcv_custom_product_author").val(""),h("#wcv_custom_product_author").css({"box-shadow":"none"}),h("#wcv_custom_product_publisher").val(""),h("#wcv_custom_product_publisher").css({"box-shadow":"none"}),h("#wcv_custom_product_edition").val(""),h("#wcv_custom_product_edition").css({"box-shadow":"none"}),h("#wcv_custom_product_subject").val(""),h("#wcv_custom_product_subject").css({"box-shadow":"none"}),h("#post_content").val(""),h("#post_content").css({"box-shadow":"none"}),h("#_regular_price").val(""),h("#_regular_price").css({"box-shadow":"none"}),h('label[for="_regular_price"]').text("Regular Price ($)"),h(".wcv-featuredimg").empty(),h("#_featured_image_id").val(""),h(".wpbooklist-customautofill-response").animate({opacity:"0"},{queue:!1,duration:500,complete:function(){h(this).remove()}}),h(".pageloader, .wr-loader-3").css({display:"block"}),o=(o=h("#wcv_custom_product_isbn").val()).replace(/ /g,""),t={action:"wpbooklist_customautofill_get_book_action",isbn:o,security:wpbooklistCustomAutofillPhpVariables.adminnonce1},h.ajax({url:ajaxurl,type:"POST",data:t,timeout:0,success:function(e){e=JSON.parse(e),console.log(e),a=0!==e?(""!==e.title&&null!==e.title&&void 0!==e.title&&(h("#post_title").val(e.title),h("#post_title").css({"box-shadow":n})),""!==e.author&&null!==e.author&&void 0!==e.author&&(h("#wcv_custom_product_author").val(e.author),h("#wcv_custom_product_author").css({"box-shadow":n})),""!==e.publisher&&null!==e.publisher&&void 0!==e.publisher&&(h("#wcv_custom_product_publisher").val(e.publisher),h("#wcv_custom_product_publisher").css({"box-shadow":n})),""!==e.edition&&null!==e.edition&&void 0!==e.edition&&(h("#wcv_custom_product_edition").val(e.title),h("#wcv_custom_product_edition").css({"box-shadow":n})),""!==e.category&&null!==e.category&&void 0!==e.category&&(h("#wcv_custom_product_subject").val(e.title),h("#wcv_custom_product_subject").css({"box-shadow":n})),""!==e.lowestusedprice&&null!==e.lowestusedprice&&void 0!==e.lowestusedprice&&(h("#_regular_price").val(e.lowestusedprice.replace("$","")),h('label[for="_regular_price"]').html(h('label[for="_regular_price"]').text()+' <span class="wpbooklist-customautofill-response" id="wpbooklist-customautofill-suggested-price-response">Suggested Price is '+e.lowestusedprice.replace("$","")+"</span>"),h("#_regular_price").css({"box-shadow":n})),""!==e.description&&null!==e.description&&void 0!==e.description&&(r=(new DOMParser).parseFromString(e.description,"text/html"),c=(c=r.body.textContent||"").replace(/  /g," "),h("#post_content").val(c),h("#post_content").css({"box-shadow":n})),s=e.image_attach_data.file.substring(0,e.image_attach_data.file.lastIndexOf(".")),i=e.image_attach_data.file.substring(e.image_attach_data.file.lastIndexOf(".")+1),h(".wcv-featuredimg").html('<img src="http://hootbookrevival.com/wp-content/uploads/'+s+'-150x150.jpg" alt="" title="'+i+'" style="max-width: 100%;">'),h("#_featured_image_id").val(e.image_attachment_id),'<p class="wpbooklist-customautofill-response" id="wpbooklist-customautofill-response-success"><span id="wpbooklist-customautofill-response-success-span">Success!</span> Review the Book Information below for accuracy.<br/>Fields highlighted in Green have been auto-filled.</p>'):'<p class="wpbooklist-customautofill-response" id="wpbooklist-customautofill-response-fail"><span id="wpbooklist-customautofill-response-fail-span">Uh-Oh!</span> We couldn\'t retrieve information for this title.<br/>Please enter the information for this title manually or try again.</p>',h("#wpbooklist-customautofill-html-insertion-wrapper").append(a),h(".pageloader, .wr-loader-3").css({display:"none"})},error:function(e,o,t){console.log(t),console.log(o),console.log(e)}}),e.preventDefault?e.preventDefault():e.returnValue=!1}),-1<window.location.href.indexOf("/search")&&h(document).on("click",".jre-customsearch-browse-grid-item-entry-indiv",function(e){var o=h(this).text();-1<o.indexOf("...")&&(o=o.replace("...","")),window.location.href="https://hootbookrevival.com/?post_type=product&wrls_search_in=title%2Cdescription%2Ccontent%2Csku&s="+encodeURI(o)}),-1<window.location.href.indexOf("/search")&&(h(document).on("click","#jre-customsearch-input-actual",function(e){h(this).val("")}),h(document).on("submit","#jre-customsearch-input-form",function(e){var o=h("#jre-customsearch-input-actual").val();window.location.href="https://hootbookrevival.com/?post_type=product&wrls_search_in=title%2Cdescription%2Ccontent%2Csku&s="+encodeURI(o),e.preventDefault?e.preventDefault():e.returnValue=!1}),h(document).on("click",".jre-customsearch-go",function(e){var o=h("#jre-customsearch-input-actual").val();window.location.href="https://hootbookrevival.com/?post_type=product&wrls_search_in=title%2Cdescription%2Ccontent%2Csku&s="+encodeURI(o)})),h(document).on("change",'.jre-customsearch-sidebar-price-selections-row-checkbox input[type="checkbox"]',function(e){h(this).prop("checked")&&(h('.jre-customsearch-sidebar-price-selections-row-checkbox input[type="checkbox"]').removeAttr("checked"),h(this).prop("checked",!0),h("#jre-customsearch-sidebar-price-custommin").val(""),h("#jre-customsearch-sidebar-price-custommax").val(""))}),h(document).on("click","#jre-customsearch-sidebar-submit-button",function(e){console.log("refine clicked!");var o=h("#jre-customsearch-sidebar-price-under10").prop("checked"),t=h("#jre-customsearch-sidebar-price-10to25").prop("checked"),c=h("#jre-customsearch-sidebar-price-25to50").prop("checked"),r=h("#jre-customsearch-sidebar-price-50andup").prop("checked"),s=h("#jre-customsearch-sidebar-price-custommin").val(),i=h("#jre-customsearch-sidebar-price-custommax").val(),a=h("#jre-customsearch-sidebar-grade-selection-actual").val(),n=h("#jre-customsearch-sidebar-subject-selection-actual").val(),u=h("#jre-customsearch-sidebar-curricula-selection-actual").val(),l="",d="",p=document.location.href;-1<window.location.href.indexOf("wrls_search_in")&&(p=p.split("&"),o&&(l+="under10&"),t&&(l+="p10to25&"),c&&(l+="p25to50&"),r&&(l+="p50andup&"),""!==s&&null!==s&&""!==i&&null!==i&&(l=l+"pmin="+s+"&"),""!==i&&null!==i&&""!==s&&null!==s&&(l=l+"pmax="+i+"&"),""!==a&&null!==a&&(l=l+"refinegrade="+a+"&"),""!==n&&null!==n&&(l=l+"refinesubject="+n+"&"),""!==u&&null!==u&&(l=l+"refinecur="+u+"&"),"&"===(d=p[0]+"&"+p[1]+"&"+p[2]+"&"+encodeURI(l))[d.length-1]&&(d=d.slice(0,-1)),window.location.href=d)}),h(document).on("submit","#jre-customsearch-sidebar-submit-form",function(e){var o=h("#jre-customsearch-sidebar-price-under10").prop("checked"),t=h("#jre-customsearch-sidebar-price-10to25").prop("checked"),c=h("#jre-customsearch-sidebar-price-25to50").prop("checked"),r=h("#jre-customsearch-sidebar-price-50andup").prop("checked"),s=h("#jre-customsearch-sidebar-price-custommin").val(),i=h("#jre-customsearch-sidebar-price-custommax").val(),a=h("#jre-customsearch-sidebar-grade-selection-actual").val(),n=h("#jre-customsearch-sidebar-subject-selection-actual").val(),u=h("#jre-customsearch-sidebar-curricula-selection-actual").val(),l="",d="",p=document.location.href;-1<window.location.href.indexOf("wrls_search_in")&&(p=p.split("&"),o&&(l+="under10&"),t&&(l+="p10to25&"),c&&(l+="p25to50&"),r&&(l+="p50andup&"),""!==s&&null!==s&&""!==i&&null!==i&&(l=l+"pmin="+s+"&"),""!==i&&null!==i&&""!==s&&null!==s&&(l=l+"pmax="+i+"&"),""!==a&&null!==a&&(l=l+"refinegrade="+a+"&"),""!==n&&null!==n&&(l=l+"refinesubject="+n+"&"),""!==u&&null!==u&&(l=l+"refinecur="+u+"&"),"&"===(d=p[0]+"&"+p[1]+"&"+p[2]+"&"+encodeURI(l))[d.length-1]&&(d=d.slice(0,-1)),window.location.href=d),e.preventDefault?e.preventDefault():e.returnValue=!1}),-1<window.location.href.indexOf("wrls_search_in")&&(-1<window.location.href.indexOf("under10")&&h("#jre-customsearch-sidebar-price-under10").prop("checked",!0),-1<window.location.href.indexOf("p10to25")&&h("#jre-customsearch-sidebar-price-10to25").prop("checked",!0),-1<window.location.href.indexOf("p25to50")&&h("#jre-customsearch-sidebar-price-25to50").prop("checked",!0),-1<window.location.href.indexOf("p50andup")&&h("#jre-customsearch-sidebar-price-50andup").prop("checked",!0),-1<window.location.href.indexOf("pmin")&&h("#jre-customsearch-sidebar-price-custommin").val(e("pmin")),-1<window.location.href.indexOf("pmax")&&h("#jre-customsearch-sidebar-price-custommax").val(e("pmax")),-1<window.location.href.indexOf("refinegrade")&&h("#jre-customsearch-sidebar-grade-selection-actual").val(e("refinegrade")),-1<window.location.href.indexOf("refinesubject")&&h("#jre-customsearch-sidebar-subject-selection-actual").val(e("refinesubject")),-1<window.location.href.indexOf("refinecur")&&h("#jre-customsearch-sidebar-curricula-selection-actual").val(e("refinecur"))),h(document).on("change","#jre-customsearch-sidebar-price-custommin, #jre-customsearch-sidebar-price-custommax",function(e){""!==h(this).val()&&h('.jre-customsearch-sidebar-price-selections-row-checkbox input[type="checkbox"]').removeAttr("checked")}),h(document).on("keyup","#jre-customsearch-sidebar-price-custommin, #jre-customsearch-sidebar-price-custommax",function(e){""!==h(this).val()&&h('.jre-customsearch-sidebar-price-selections-row-checkbox input[type="checkbox"]').removeAttr("checked")}),h(document).on("paste","#jre-customsearch-sidebar-price-custommin, #jre-customsearch-sidebar-price-custommax",function(e){""!==h(this).val()&&h('.jre-customsearch-sidebar-price-selections-row-checkbox input[type="checkbox"]').removeAttr("checked")})});